<?xml version="1.0" encoding="UTF-8"?>
<BehaviorTree xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../MetaData/schema_ai.xsd" m_ContextType="ai">
    <Sequence>
        <Selector>
            <!-- rush -->
            <Sequence>
                <Selector>
                    <Cnd_ChaseInProgress m_Invert="true"/>
                    <Cnd_IsChaseHandicapActive m_Invert="true"/>
                </Selector>
                <Opr_GetDistanceTraveledByTarget m_Time="3.0" m_Distance="#distance_traveled"/>
                <Cnd_InTargetHorzAngle m_Target="#target" m_Angle="110" m_Invert="true"/>
                <Selector>
                    <Cnd_IsCombatTargetInRadius m_Radius="12.0" m_Invert="true"/>
                    <Cnd_IsBBValueGreater_float m_Key="#distance_traveled" m_Value="10.0"/>
                </Selector>
                <Opr_SetBBValue_string m_Key="#tactic" m_Value="rush"/>
                <Opr_SetBBValue_float m_Key="#combat_slot_attack_min_delay" m_Value="0"/>
                <Opr_SetBBValue_bool m_Key="#combat_slot_attack_release_on_damage" m_Value="true"/>
                <Opr_SetBBValue_uint m_Key="#combat_slot_melee_limit" m_Value="12"/>
                <Opr_SetBBValue_uint m_Key="#combat_slot_range_limit" m_Value="12"/>
            </Sequence>
            <!-- keep cautious -->
            <Sequence>
                <Cnd_IsBBValueEqual_string m_Key="#tactic" m_Value="cautious"/>
                <Cnd_HasTimePassed m_TimePoint="#entered_cautious_time" m_TimeDelta="10.0" m_Invert="true"/>
            </Sequence>
            <!-- cautious -->
            <CooldownTimeDelta m_CooldownTime="20.0">
                <Sequence>
                    <Cnd_DamageTaken/>
                    <Cnd_IsPlayer m_Target="#target"/>
                    <Cnd_HealthBelowOrEqual m_Level="$cautious_state_health_threshold"/>
                    <Opr_SetBBValue_bool m_Key="#cautious_triggered" m_Value="true"/>
                    <Opr_SetBBValue_string m_Key="#tactic" m_Value="cautious"/>
                    <Opr_GetCurrentTime m_TimePoint="#entered_cautious_time"/>
                </Sequence>
            </CooldownTimeDelta>
            <!-- default -->
            <Sequence>
                <Opr_SetBBValue_string m_Key="#tactic" m_Value="default"/>
                <Opr_SetBBValue_float m_Key="#combat_slot_attack_min_delay" m_Value="0.5"/>
                <Opr_SetBBValue_bool m_Key="#combat_slot_attack_release_on_damage" m_Value="false"/>
                <Opr_SetBBValue_uint m_Key="#combat_slot_melee_limit" m_Value="12"/>
                <Opr_SetBBValue_uint m_Key="#combat_slot_range_limit" m_Value="12"/>
            </Sequence>
        </Selector>
        <Opr_DebugPrintValue_float m_Label="Distance" m_Value="#distance_traveled" m_Height="-0.2"/>
        <Opr_DebugPrintValue_string m_Label="Tactic" m_Value="#tactic" m_Height="-0.1"/>
    </Sequence>
</BehaviorTree>
