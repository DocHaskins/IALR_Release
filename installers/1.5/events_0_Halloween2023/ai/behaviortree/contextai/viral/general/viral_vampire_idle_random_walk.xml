<?xml version="1.0"?>
<BehaviorTree xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../MetaData/schema_ai.xsd" m_ContextType="ai">
	<SequenceMem>
		<Cnd_IsInDarkzone m_Invert="true"/>
		<Opr_GetSelfPosition m_Position="#self_pos"/>
		<Opr_GetDirectionFromPosition m_Position="#self_pos" m_Origin="#current_pos" m_Direction="#move_dir" m_CalcInXZ="true"/>
		<Opr_RandomFloat m_Result="#variation_angle" m_RangeMax="360" m_RangeMin="0"/>
		<Opr_GetDirectionFromAngle m_Angle="#variation_angle" m_Direction="#move_dir_final" m_ForwardDirection="#move_dir"/>
		<Opr_SetBBValue_float m_Key="#move_dist" m_Value="40.0"/>
		<Opr_GetPositionInDirection m_Distance="#move_dist" m_Position="#move_pos" m_Direction="#move_dir_final" m_Origin="#self_pos"/>
		<Opr_FindNearestPositionOnNavmesh m_Position="#move_pos" m_WantedPosition="#move_pos" m_XZRadius="#move_dist" m_YRadius="60.0"/>
		<Selector>
			<Sequence>
				<Opr_GetDistanceToPosition m_Distance="#end_range" m_Position="#move_pos"/>
				<Cnd_IsBBValueGreaterOrEqual_float m_Key="#end_range" m_Value="8" m_Invert="true"/>
			</Sequence>
			<Act_Move m_MoveAwayFromEndPosition="false" m_MoveStyle="Walk" m_Destination="#move_pos" m_EndRadius="15.0" m_FailIfDestUnreachable="true"
			m_AdditionalTurnCost ="#turn_increased_cost" m_PreferHigherPlaces="#pref_higher_places" m_StopAtDest="true" m_SkipStart="#should_skip_start" m_AvoidRegionsPreset="$const_avoid_regions_preset" m_TeleportIfBlocked="true"
			m_TryToFindDestinationOnNavmesh="true" m_IsAvoidanceActive="$use_avoidance" m_StartPolicy="INTERRUPT" m_AbandonPolicy="BLENDOUT" m_LocomotionSpeed="#retreat_speed"/>
		</Selector>
    </SequenceMem>
</BehaviorTree>
